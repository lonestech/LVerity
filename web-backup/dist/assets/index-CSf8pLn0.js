import{r as l,I as x,_ as p,cF as j,j as e,cG as v,cH as y,s as t,K as I}from"./index-ps_LC9pP.js";import{R as k,C as w}from"./row-COHH8Rx0.js";import{C as z}from"./index-Ckz2MU5i.js";import{T as S,I as u}from"./index-CLICSLSb.js";import{F as n,B as m}from"./index-lekb2yts.js";var L={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M832 464h-68V240c0-70.7-57.3-128-128-128H388c-70.7 0-128 57.3-128 128v224h-68c-17.7 0-32 14.3-32 32v384c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V496c0-17.7-14.3-32-32-32zM332 240c0-30.9 25.1-56 56-56h248c30.9 0 56 25.1 56 56v224H332V240zm460 600H232V536h560v304zM484 701v53c0 4.4 3.6 8 8 8h40c4.4 0 8-3.6 8-8v-53a48.01 48.01 0 10-56 0z"}}]},name:"lock",theme:"outlined"},R=function(s,a){return l.createElement(x,p({},s,{ref:a,icon:L}))},b=l.forwardRef(R);const{Title:h}=S,F=()=>{const[c,s]=l.useState(!1),a=j(),d=!y,g=async o=>{s(!0);try{if(d){const i=await(await fetch("/dev-login")).json();if(i.success){localStorage.setItem("token",i.data.token),localStorage.setItem("user",JSON.stringify(i.data.user)),t.success("登录成功"),a("/");return}}await I.login({username:o.username,password:o.password}),t.success("登录成功"),a("/")}catch(r){console.error("登录失败:",r),t.error("登录失败，请检查用户名和密码")}finally{s(!1)}},f=async()=>{s(!0);try{const r=await(await fetch("/dev-login")).json();r.success?(localStorage.setItem("token",r.data.token),localStorage.setItem("user",JSON.stringify(r.data.user)),t.success("开发者模式登录成功"),a("/")):t.error("开发者模式登录失败")}catch(o){console.error("开发者模式登录失败:",o),t.error("开发者模式登录失败")}finally{s(!1)}};return e.jsx(k,{justify:"center",align:"middle",style:{minHeight:"100vh",background:"#f0f2f5"},children:e.jsx(w,{xs:22,sm:16,md:12,lg:8,xl:6,children:e.jsxs(z,{children:[e.jsxs("div",{style:{textAlign:"center",marginBottom:24},children:[e.jsx(h,{level:2,children:"LVerity 验证系统"}),e.jsx(h,{level:4,type:"secondary",children:"用户登录"})]}),e.jsxs(n,{name:"login",onFinish:g,layout:"vertical",children:[e.jsx(n.Item,{name:"username",rules:[{required:!0,message:"请输入用户名"}],children:e.jsx(u,{prefix:e.jsx(v,{}),placeholder:"用户名",size:"large"})}),e.jsx(n.Item,{name:"password",rules:[{required:!0,message:"请输入密码"}],children:e.jsx(u.Password,{prefix:e.jsx(b,{}),placeholder:"密码",size:"large"})}),e.jsx(n.Item,{children:e.jsx(m,{type:"primary",htmlType:"submit",loading:c,block:!0,size:"large",children:"登录"})}),d&&e.jsx(n.Item,{children:e.jsx(m,{onClick:f,loading:c,block:!0,size:"large",children:"开发者模式登录"})})]})]})})})};export{F as default};
