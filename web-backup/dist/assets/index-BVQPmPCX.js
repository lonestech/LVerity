import{l,r as p,j as e,s as u}from"./index-ps_LC9pP.js";import{r as s}from"./request-Cf19XcXK.js";import{F as a,B as f}from"./index-lekb2yts.js";import{C as x}from"./index-Ckz2MU5i.js";import{R as d,C as c}from"./row-COHH8Rx0.js";import{S as r,f as g}from"./index-gmqBHMrU.js";import{P as j}from"./index-zoe9Kp3s.js";const h={getConfig:async()=>{const{data:t}=await l.get("/api/system/config");return t},updateConfig:async(t,n)=>{const{data:i}=await l.put("/api/system/config",{key:t,value:n});return i},getStats:async()=>{const{data:t}=await l.get("/api/system/stats");return t},getLogs:async t=>{const{data:n}=await l.get("/api/system/logs",{params:t});return n},clearLogs:async t=>{await l.delete("/api/system/logs",{params:{before:t}})},getSettings:()=>s.get("/api/system/settings"),updateSettings:t=>s.put("/api/system/settings",t),getSystemInfo:()=>s.get("/api/system/info"),getSystemLogs:t=>s.get("/api/system/logs",{params:t}),restartService:()=>s.post("/api/system/restart"),checkUpdate:()=>s.get("/api/system/check-update"),performUpdate:()=>s.post("/api/system/update")};function O(){const[t]=a.useForm(),[n,i]=p.useState(!1);p.useEffect(()=>{(async()=>{try{i(!0);const m=await h.getSettings();t.setFieldsValue(m)}catch(m){u.error(m.message||"加载设置失败")}finally{i(!1)}})()},[t]);const y=async()=>{try{i(!0);const o=await t.validateFields();await h.updateSettings(o),u.success("设置保存成功")}catch(o){u.error(o.message||"保存失败")}finally{i(!1)}};return e.jsx(j,{children:e.jsx(x,{title:"系统设置",children:e.jsxs(a,{form:t,layout:"vertical",initialValues:{theme:"light",language:"zh_CN",notifications:!0,autoUpdate:!0},children:[e.jsxs(d,{gutter:24,children:[e.jsx(c,{span:12,children:e.jsx(a.Item,{name:"theme",label:"界面主题",rules:[{required:!0,message:"请选择界面主题"}],children:e.jsxs(r,{children:[e.jsx(r.Option,{value:"light",children:"浅色主题"}),e.jsx(r.Option,{value:"dark",children:"深色主题"}),e.jsx(r.Option,{value:"system",children:"跟随系统"})]})})}),e.jsx(c,{span:12,children:e.jsx(a.Item,{name:"language",label:"语言",rules:[{required:!0,message:"请选择语言"}],children:e.jsxs(r,{children:[e.jsx(r.Option,{value:"zh_CN",children:"简体中文"}),e.jsx(r.Option,{value:"en_US",children:"English"})]})})})]}),e.jsxs(d,{gutter:24,children:[e.jsx(c,{span:12,children:e.jsx(a.Item,{name:"notifications",label:"通知提醒",valuePropName:"checked",children:e.jsx(g,{})})}),e.jsx(c,{span:12,children:e.jsx(a.Item,{name:"autoUpdate",label:"自动更新",valuePropName:"checked",children:e.jsx(g,{})})})]}),e.jsx(a.Item,{children:e.jsx(f,{type:"primary",onClick:y,loading:n,children:"保存设置"})})]})})})}export{O as default};
